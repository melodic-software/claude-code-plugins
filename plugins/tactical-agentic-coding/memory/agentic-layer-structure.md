# Agentic Layer Structure

## Overview

The agentic layer is the combination of deterministic code and non-deterministic agents that operates on your codebase. It surrounds your application layer like a ring.

## Time Investment

| Layer | Investment | Focus |
| ------- | ------------ | ------- |
| **Agentic Layer** | 50%+ of your time | How agents operate |
| **Application Layer** | <50% of your time | What agents work on |

## Minimum Viable Agentic Layer

The bare essentials to start agentic coding:

```text
project/
├── specs/                    # Plans for agents to follow
│   └── *.md                 # Implementation specifications
├── .claude/
│   └── commands/            # Agentic prompts
│       ├── chore.md         # Chore planning template
│       ├── feature.md       # Feature planning template
│       └── implement.md     # Implementation HOP
└── adws/                    # AI Developer Workflows
    ├── adw_modules/
    │   └── agent.py         # Core agent execution
    └── adw_*.py             # Top-level workflow scripts
```yaml

### What Each Directory Contains

**specs/**

- Implementation plans generated by planning templates
- Specifications that guide agent work
- Named: `{type}-{id}-{description}.md`

**.claude/commands/**

- Slash command templates
- Reusable prompts for common operations
- The "vocabulary" your agents understand

**adws/**

- Orchestration scripts
- Gateway scripts (entry points)
- Composed workflows (multi-step)
- Core modules for agent execution

## Scaled Agentic Layer

Full enterprise-grade structure:

```text
project/
├── specs/                    # Plans and specifications
│   ├── issue-*.md           # Issue-based specs
│   └── deep_specs/          # Complex architectural specs
├── .claude/
│   ├── commands/            # Agentic prompts
│   │   ├── chore.md
│   │   ├── bug.md
│   │   ├── feature.md
│   │   ├── implement.md
│   │   ├── test.md
│   │   └── review.md
│   ├── hooks/               # Event-driven automation
│   └── settings.json        # Agent configuration
├── adws/                    # AI Developer Workflows
│   ├── adw_modules/         # Core logic modules
│   │   ├── agent.py         # Subprocess execution
│   │   ├── data_types.py    # Pydantic models
│   │   ├── git_ops.py       # Git operations
│   │   ├── github.py        # GitHub API
│   │   ├── state.py         # State management
│   │   └── workflow_ops.py  # Workflow orchestration
│   ├── adw_triggers/        # Workflow triggers
│   │   ├── trigger_webhook.py
│   │   └── trigger_cron.py
│   ├── adw_tests/           # Testing suite
│   ├── adw_data/            # Agent database
│   └── adw_*_iso.py         # Isolated workflows
├── agents/                  # Agent output & observability
│   └── {adw_id}/
│       └── adw_state.json   # Workflow state
└── trees/                   # Agent worktrees (isolation)
    └── {branch_name}/       # Isolated work environments
```yaml

## Parabolic Value

Building an agentic layer is parabolic:

- 10 minutes invested -> 2+ hours of value
- Starts thin, not very useful at first
- As you add AI developer workflows, value compounds
- Eventually: entire problem classes solved autonomously

## Building the Layer

### Start Small

```text
Week 1: Add specs/ and one /chore template
Week 2: Add /implement HOP and basic gateway script
Week 3: Add /feature and /bug templates
Week 4: Add triggers and composed workflows
```markdown

### Focus on Problem Classes

Don't build one-off solutions. Build templates that solve classes of problems:

| Problem Class | Template |
| --------------- | ---------- |
| Simple changes | /chore |
| Bug fixes | /bug |
| New features | /feature |
| Refactoring | /refactor |

## Signs of Under-Investment

You're under-investing in the agentic layer if:

- [ ] No specs/ directory exists
- [ ] Fewer than 5 slash commands
- [ ] No composed workflows
- [ ] Still doing most work in-loop
- [ ] Agents don't understand your codebase patterns

## Cross-References

- @the-guiding-question.md - Daily decision framework
- @gateway-script-patterns.md - Entry point scripts
- @agentic-vs-application.md - Layer separation
- @composable-primitives.md - Building blocks for workflows
